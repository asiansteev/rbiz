<h3>Billing Address</h3>
<% @customer.addresses.each do |addr| -%>
  <div class="address_block">
    <%= addr.display_name %><br/>
    <%= addr.phone %><br/>
    <%= addr.street %><br/>
    <%= addr.city %> <%= addr.state %> <%= addr.zip %><br/>
    <%= link_to "Bill to this address", :controller=>'cart', :action=>'bill_to_existing', :id=>addr.id %>
  </div>
<% end -%>

<%= error_messages_for :address %>

<div class="cart">
<% form_tag(:action => 'billing_address_post') do %>
<table cellpadding="0" cellspacing="0" border="0" class="cleartable">
  <tbody>
    <tr>
      <td class="right" style="width: 125px"><label for="address_display_name">Name</label></td>
      <td><%= text_field :address, :display_name %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px"><label for="address_phone">Phone Number</label></td>
      <td><%= text_field :address, :phone %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px"><label for="address_street">Street Address</label></td>
      <td><%= text_field :address, :street %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px"><label for="address_city">City</label></td>
      <td><%= text_field :address, :city %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px"><label for="address_state">State</label></td>
      <td><%= state_select :address, :state %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px"><label for="address_zip">Zip</label></td>
      <td><%= text_field :address, :zip %></td>
    </tr>
    <tr>
      <td class="right" style="width: 125px">&nbsp;</td>
      <td><%= submit_tag 'Continue to Payment Information' %></td>
    </tr>
  </tbody>
</table>
<% end %>
</div>
